--------LISBOA
ipv6 unicast-routing
ip route 201.0.0.0 255.255.255.128 10.100.1.1
ip route 102.0.0.0 255.0.0.0 Tunnel 0 10.1.3.1
--INT_F1/0
int f1/0
ip add 102.1.1.1 255.255.255.252
ip address 200.1.0.129 255.255.255.192 secondary
no shut
ip ospf 2 area 0
ipv6 enable
ipv6 ospf 2 area 0
ipv6 address 2100:1:1:201::1/64
ip nat inside

--INT_F0/0
int f0/0
ip address 10.100.1.3 255.255.255.0
no shut
ip nat outside
ipv6 enable
ipv6 address 2100:1:1:400::3/64


--INT tunnel 0
  int t0
    ip add 10.1.3.2 255.255.255.248
    tunnel mode gre ip 
    tunnel source 10.100.3.2
    tunnel destination 10.100.1.2
    no shut
    exit

--IPSEC_VPN
crypto isakmp policy 20
authentication pre-share
crypto isakmp key labcom address 10.100.1.2
crypto ipsec transform-set nss-ts esp-3des esp-sha-hmac
crypto map nss-cm 10 ipsec-isakmp
set peer 10.100.1.2
set transform-set nss-ts
match address nss-cm-acl
crypto map nss-cm
ip access-list extended nss-cm-acl
permit ip 102.0.0.0 0.255.255.255 101.0.0.0 0.255.255.255

--OSPF_2
router ospf 2
router-id 1.1.1.1
network 201.0.0.128 0.0.0.63 area 0 
default-information originate always
distribute-list 50 out
ipv6 router ospf 2
router-id 1.1.1.1
passive-int t0 

--NAT
access-list 50 deny 102.0.0.0 0.255.255.255
access-list 50 permit any
access-list 1 permit 102.0.0.0 0.255.255.255
ip nat pool POOLR 200.1.0.129 200.1.0.190 netmask 255.255.255.192
ip nat inside source list 1 pool POOLR overload 